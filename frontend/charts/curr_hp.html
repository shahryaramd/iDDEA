<!DOCTYPE HTML>
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Detroit Dam</title>

	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
	<style type="text/css">
		$ {
			demo.css
		}
	</style>
	<!-- <script src="https://code.highcharts.com/highcharts.js"></script> -->
	<script src="https://code.highcharts.com/highcharts.js"></script>
	<script src="https://code.highcharts.com/modules/data.js"></script>
	<script src="https://code.highcharts.com/modules/exporting.js"></script>

	<script type="text/javascript">
		// fn = 'http://128.95.45.89/testdss/usace_data/det_hp.txt'
		fn = '../data/usace_data/det_hp.txt'
		$.get(fn, function(csv) {
				$('#container').highcharts({

				// $('#container').highcharts({
				data: {
					csv: csv
				},
				chart: {
					type: 'column',
					zoomType: 'x'
				},
				title: {
					text: 'Observed Hydropower Production',
					style: {
						fontWeight: 'bold'
					}
				},
				subtitle: {
		            text: 'Source: US Army Corps of Engineers'
		        },
				series: [{
		            marker: {
		                enabled: true,
		                radius: 1
		            },
		            shadow: false,
		            tooltip: {
		                valueDecimals: 2
		            }
		        }],
				xAxis: {
					type: 'datetime',
					labels: {
						style: {
							fontSize: '12px'
						}
					},
					dateTimeLabelFormats: {
						second: '%Y-%m-%d<br/>%H:%M:%S',
						minute: '%Y-%m-%d<br/>%H:%M',
						hour: '%Y-%m-%d<br/>%H:%M',
						day: '%Y<br/>%m-%d',
						week: '%Y<br/>%m-%d',
						month: '%Y-%m',
						year: '%Y'
					},
					rangeSelector: {
						// verticalAlign: ‘top’,
						x: 0,
						y: 0
					}
				},
				// 	yAxis: [{
				//     lineWidth: 1,
				//     opposite: false,
				//     // labels: {
				//     //     align: 'left',
				//     //     x: 5
				//     // }
				// }],
				yAxis: {
					opposite: false,
					tickInterval: 1000,
					labels: {
						align: 'right',
						format: '{point.y:,.0f}',
						step:1,
						formatter: function () {
							return Highcharts.numberFormat(this.value,0);
						},
						style: {
							fontSize: '12px'
						}
					},
					title: {
						text: 'Hydropower (MWh)',
						style: {
							fontSize: '12px'
						}
					}
				}
			});
		});
	</script>
</head>

<body style="overflow:hidden;">
<!-- <div align = "left"><a href="../data/det_elev.txt" target="_blank" style="color: #1E88E5;">Download Streamflow Data</a></div> -->
<div id ="message" style="font-family: 'Lato', Calibri, Arial, sans-serif; font-size: 15px;
color: red; margin:5 auto;display:'none';">Sorry, data unavailable</div>

<div id = "container" style = "min-width: 310px; height: 400px; margin: 0 auto"></div>
<script type="text/javascript">
	fn = '../data/usace_data/det_hp.txt'

	// give message if data unavailable
	var http = new XMLHttpRequest();
	http.open('HEAD', fn, false);
	http.send();

	// get id of message/compare divs to display on data loading
	var msg = document.getElementById('message');
	if (http.status != 404) {
		msg.style.display = 'none';
	} else {
		msg.style.display = 'block';
	}
</script>
</body>

</html>
